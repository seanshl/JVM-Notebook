### 类文件结构

1. **jvm与语言无关**
	* JVM不与**包括java**在内的任何语言绑定，它只和**class**文件，一种特殊格式的二进制文件绑定。任何语言,例如scala, groovy, kotlin只需要有编译器将代码编译为class文件就可以在jvm上运行。

2. **Class文件结构**
	1. **基础**
		* 任何一个class文件都对应着唯一的类或接口信息，但是类或接口并不一定都定义在class文件里（例如，可以直接通过类加载器加载）.
		* Class是一个**以8位字节为基础单位的二进制流**
		* Class文件格式采用一种类似于C语言结构体的伪结构来存储数据，这种伪结构只有两种数据类型：**无符号数**和**表**
			* 无符号数属于基本的数据类型，以u1, u2, u4, u8来代表1个字节，2个字节，4个字节和8个字节的无符号数.可以用来描述数字，索引引用，数量之或者按照utf8编码构成字符串值
			* 表由多个无符号数或者其他表作为数据项构成的复合数据类型, 用于描述有层次的复合结构的数据。
	2. **magic number与class版本**
		* 每个class文件的头4个字节称为magic number. 唯一作用是确定这个文件是否为一个能被虚拟机接受的class文件.
		* Class文件的magic number 为0xCAFEBABE。 
		* magic number之后的4个字节存储Class文件的版本号, 5-6为此版本号, 7-8为主版本号. 
		* 高版本的jdk能向下兼容以前版本的class文件，但不能运行以后版本的class文件，即使文件格式并未发生变化，虚拟机也必须拒绝执行超过其版本号的class文件
	3. **常量池**
		* 常量池紧跟着主此版本号，可以理解为class文件中的资源仓库, 是占用class文件空间最大的数据项目之一。也是class文件中第一个出现的表数据类型. 
		* 由于常量池中的常量数量不固定，所以先要放一个u2类型的数据，代表常量池容量计数器. 
		* 主要存放两大类常亮，字面量(Literal)和符号引用(symbolic references). 
			* 字面量接近java语言层面的常量概念，如文本字符串,声明为final的常量值等.
			* 符号引用属于编译原理的概念，包含以下三类常量
				* 类和接口的全限定名(fully qualified name)
				* 字段的名称和描述符
				* 方法的名称和描述符
